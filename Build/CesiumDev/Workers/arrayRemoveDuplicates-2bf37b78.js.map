{"version":3,"file":"arrayRemoveDuplicates-2bf37b78.js","sources":["../../../packages/engine/Source/Core/arrayRemoveDuplicates.js"],"sourcesContent":["import Check from \"./Check.js\";\r\nimport defaultValue from \"./defaultValue.js\";\r\nimport defined from \"./defined.js\";\r\nimport CesiumMath from \"./Math.js\";\r\n\r\nconst removeDuplicatesEpsilon = CesiumMath.EPSILON10;\r\n\r\n/**\r\n * Removes adjacent duplicate values in an array of values.\r\n *\r\n * @param {Array.<*>} [values] The array of values.\r\n * @param {Function} equalsEpsilon Function to compare values with an epsilon. Boolean equalsEpsilon(left, right, epsilon).\r\n * @param {Boolean} [wrapAround=false] Compare the last value in the array against the first value. If they are equal, the last value is removed.\r\n * @param {Array.<Number>} [removedIndices=undefined] Store the indices that correspond to the duplicate items removed from the array, if there were any.\r\n * @returns {Array.<*>|undefined} A new array of values with no adjacent duplicate values or the input array if no duplicates were found.\r\n *\r\n * @example\r\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0), (1.0, 1.0, 1.0)]\r\n * const values = [\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\r\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\r\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon);\r\n *\r\n * @example\r\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0)]\r\n * const values = [\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\r\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\r\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon, true);\r\n *\r\n * @example\r\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0)]\r\n * // removedIndices will be equal to [1, 3, 5]\r\n * const values = [\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\r\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\r\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\r\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\r\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\r\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon, true);\r\n * @private\r\n */\r\nfunction arrayRemoveDuplicates(\r\n  values,\r\n  equalsEpsilon,\r\n  wrapAround,\r\n  removedIndices\r\n) {\r\n  //>>includeStart('debug', pragmas.debug);\r\n  Check.defined(\"equalsEpsilon\", equalsEpsilon);\r\n  //>>includeEnd('debug');\r\n\r\n  if (!defined(values)) {\r\n    return undefined;\r\n  }\r\n\r\n  wrapAround = defaultValue(wrapAround, false);\r\n  const storeRemovedIndices = defined(removedIndices);\r\n\r\n  const length = values.length;\r\n  if (length < 2) {\r\n    return values;\r\n  }\r\n\r\n  let i;\r\n  let v0 = values[0];\r\n  let v1;\r\n\r\n  // We only want to create a new array if there are duplicates in the array.\r\n  // As such, cleanedValues is undefined until it encounters the first duplicate, if it exists.\r\n  let cleanedValues;\r\n  let lastCleanIndex = 0;\r\n\r\n  // removedIndexLCI keeps track of where lastCleanIndex would be if it were sorted into the removedIndices array.\r\n  // In case of arrays such as [A, B, C, ..., A, A, A], removedIndices will not be sorted properly without this.\r\n  let removedIndexLCI = -1;\r\n\r\n  for (i = 1; i < length; ++i) {\r\n    v1 = values[i];\r\n    if (equalsEpsilon(v0, v1, removeDuplicatesEpsilon)) {\r\n      if (!defined(cleanedValues)) {\r\n        cleanedValues = values.slice(0, i);\r\n        lastCleanIndex = i - 1;\r\n        removedIndexLCI = 0;\r\n      }\r\n      if (storeRemovedIndices) {\r\n        removedIndices.push(i);\r\n      }\r\n    } else {\r\n      if (defined(cleanedValues)) {\r\n        cleanedValues.push(v1);\r\n        lastCleanIndex = i;\r\n        if (storeRemovedIndices) {\r\n          removedIndexLCI = removedIndices.length;\r\n        }\r\n      }\r\n      v0 = v1;\r\n    }\r\n  }\r\n\r\n  if (\r\n    wrapAround &&\r\n    equalsEpsilon(values[0], values[length - 1], removeDuplicatesEpsilon)\r\n  ) {\r\n    if (storeRemovedIndices) {\r\n      if (defined(cleanedValues)) {\r\n        removedIndices.splice(removedIndexLCI, 0, lastCleanIndex);\r\n      } else {\r\n        removedIndices.push(length - 1);\r\n      }\r\n    }\r\n\r\n    if (defined(cleanedValues)) {\r\n      cleanedValues.length -= 1;\r\n    } else {\r\n      cleanedValues = values.slice(0, -1);\r\n    }\r\n  }\r\n\r\n  return defined(cleanedValues) ? cleanedValues : values;\r\n}\r\n\r\nexport default arrayRemoveDuplicates;\r\n"],"names":["CesiumMath","Check","defined","defaultValue"],"mappings":"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"}